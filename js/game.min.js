
"use strict";var body=document.body;var app=document.getElementById("app");var setting=document.getElementById("setting");var giveCharacter=document.getElementById("giveCharacter");var gamming=document.getElementById("gamming");var giveRound=document.querySelector(".give-round");var textTop=document.getElementById("text-top");var gammingTips=document.getElementById("gamming-tips");var gammingNumber=document.getElementById("gamming-number");var gammingChoose=document.getElementById("gamming-choose");var gammingFunction=document.getElementById("gamming-function");var gammingNext=document.getElementById("gamming-next");var chooses=document.querySelectorAll(".choose");var models=document.querySelectorAll(".model");var scoreRecord=document.getElementById("scoreRecord");var modelData={"cate":[{"model":"ä¸€èˆ¬å±€","peopleNum":9,"wolfsNum":3,"godsNum":3,"mansNum":3,"chracterText":"(3ç‹¼,é ,å¥³,çµ,3æ°‘)","characterAll":["ç‹¼äºº","ç‹¼äºº","ç‹¼äºº","é è¨€å®¶","å¥³å·«","çµäºº","å¹³æ°‘","å¹³æ°‘","å¹³æ°‘"],"processNight":["å¤©é»‘","é ","ç‹¼","å·«","å¤©äº®","éºè¨€"]},{"model":"ç‹¼ç‹å±€","peopleNum":10,"wolfsNum":3,"godsNum":4,"mansNum":3,"chracterText":"(ç‹¼ç‹,2ç‹¼,é ,å¥³,çµ,é¨,3æ°‘)","characterAll":["ç‹¼ç‹","ç‹¼äºº","ç‹¼äºº","é è¨€å®¶","å¥³å·«","çµäºº","é¨å£«","å¹³æ°‘","å¹³æ°‘","å¹³æ°‘"],"processNight":["å¤©é»‘","é ","ç‹¼","å·«","å¤©äº®","éºè¨€"]}]};var cate=modelData.cate;var modelPlaying={};var characterList=[];var giveCharacterOrder=0;var giveTipsText=void 0;var numbers=void 0;var order=0;var killed=[];var score=[];var isGameOver=false;var startNum=void 0;var speakOrder=[];var lastCharacterLisetLen=void 0;var nextFirst=void 0;var functionState={"prophet":{"alive":true},"witch":{"antidote":true,"poison":true,"poisonTarget":-1,"start":false,"alive":true},"knight":{"function":true},"hunter":{"function":true},"wolfKing":{"function":true},"night":true,"nightKillOrder":0};var rand=function rand(min,max){var randArr=(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1));var randNum=randArr[0]/(0xffffffff+1);return Math.floor(randNum*(max-min+1)+min);};var selectModel=function selectModel(idx){console.log(cate[idx].model);if(cate[idx].model==="è‡ªè¨‚æ¨¡å¼")return;modelPlaying=cate[idx];score={"day":0,"wolfs":modelPlaying.wolfsNum,"gods":modelPlaying.godsNum,"mans":modelPlaying.mansNum};console.log("åˆå§‹è¨ˆåˆ†",score);give();giveHtml();setting.classList.add("no-show");setTimeout(function(){setting.classList.add("none");giveCharacter.classList.remove("none");},250);};var give=function give(){var id=void 0,character=void 0,randNum=void 0,team=void 0;var allNum=modelPlaying.peopleNum-1;for(var i=0;i<modelPlaying.peopleNum;i++){id=i+1;randNum=rand(0,allNum);allNum--;gammingNumber.insertAdjacentHTML("beforeend","<div class=\"number\">"+id+"</div>");character=modelPlaying.characterAll[randNum];modelPlaying.characterAll.splice(randNum,1);character.includes("ç‹¼")?team="wolfs":character.includes("æ°‘")?team="mans":team="gods";characterList.push({"id":id,"character":character,"team":team,"alive":true});}
numbers=document.querySelectorAll(".number");numbersChoosesClick();console.log("èº«åˆ†ï¼š",characterList);};var giveHtml=function giveHtml(){var giveNum=document.querySelector(".give-num");var giveTips=document.querySelector(".give-tips");var give_character=document.querySelector(".give-character");var lastOrder=characterList.length-1;giveRound.setAttribute("data-give","toCharacter");giveNum.innerText=characterList[giveCharacterOrder].id;giveTips.innerText="é»æ“Šçœ‹èº«åˆ†";giveRound.addEventListener("click",function(){if(giveRound.getAttribute("data-give")==="toCharacter"){give_character.innerText=characterList[giveCharacterOrder].character;giveCharacterOrder===lastOrder?giveTips.innerText="é»æ“Šå¾Œé–‹å§‹éŠæˆ²":giveTips.innerText="é»æ“Šå¾Œå‚³çµ¦ä¸‹ä¸€ä½";giveRound.classList.add("round-rotate");give_character.classList.add("text-rotate");giveTips.classList.add("tips-rotate");setTimeout(function(){giveNum.classList.add("none");give_character.classList.remove("none");},120);giveRound.setAttribute("data-give","toNum");return;}
if(giveCharacterOrder===lastOrder){night();return;}
giveCharacterOrder++;giveNum.innerText=characterList[giveCharacterOrder].id;giveTips.innerText="é»æ“Šçœ‹èº«åˆ†";giveRound.classList.remove("round-rotate");give_character.classList.remove("text-rotate");giveTips.classList.remove("tips-rotate");setTimeout(function(){giveNum.classList.remove("none");give_character.classList.add("none");},120);giveRound.setAttribute("data-give","toCharacter");},false);};var night=function night(){body.classList.add("night");giveCharacter.classList.add("none");gammingNumber.classList.add("none");gammingChoose.classList.add("none");gammingNext.classList.add("none");gammingFunction.setAttribute("class","none");textTop.classList.remove("text-gold");gamming.classList.remove("none");scoreRecord.classList.remove("none");textTop.innerText="å¤©é»‘è«‹é–‰çœ¼";gammingTips.innerText="é»æ“Šç•«é¢ä¸‹ä¸€æ­¥";functionState.witch.start=false;functionState.night=true;functionState.nightKillOrder=0;order=0;killed=[];scoreRecord.innerText=score.wolfs+" \u72FC "+score.gods+" \u795E "+score.mans+" \u6C11";score.day++;gammingNext.removeEventListener("click",nextClick,false);gammingFunction.removeEventListener("click",functionClick,false);app.addEventListener("click",nightFlow,false);console.log("è¨˜åˆ†æ¬„ï¼š",score);};var nightFlow=function nightFlow(e){e.preventDefault();console.log("å¤œæ™šæµç¨‹ï¼š",modelPlaying.processNight[order]);if(modelPlaying.processNight[order]==="å¤©é»‘"){order++;return;}
if(modelPlaying.processNight[order]==="é "){textTop.classList.add("text-gold");textTop.innerText="é è¨€å®¶è«‹çœçœ¼";if(functionState.prophet.alive===false){gammingTips.innerText="(é è¨€å®¶å·²æ­»ğŸ‘»)\nè«‹é¸æ“‡ä½ è¦æŸ¥é©—çš„å°è±¡\né è¨€å®¶è«‹é–‰çœ¼ğŸ˜Œ\n\né»æ“Šç•«é¢ä¸‹ä¸€æ­¥";order++;return;}
gammingTips.innerText="è«‹é¸æ“‡ä½ è¦æŸ¥é©—çš„å°è±¡";gammingNumber.classList.remove("none");return;}
if(modelPlaying.processNight[order]==="ç‹¼"){gammingNumber.classList.remove("none");textTop.innerText="ç‹¼äººè«‹çœçœ¼";gammingTips.innerText="è«‹ç¢ºèªå½¼æ­¤èº«åˆ†ï¼Œæ¯”å‡ºè¦æ®ºçš„å°è±¡";return;}
if(modelPlaying.processNight[order]==="å·«"){console.log("å¥³å·«æŠ€èƒ½ç‹€æ…‹ï¼š",functionState.witch);if(functionState.witch.start)return;functionState.witch.start=true;gammingNumber.classList.add("none");textTop.innerText="å¥³å·«è«‹çœçœ¼";if(functionState.witch.alive===false){if(functionState.witch.antidote===false&&functionState.witch.poison===false){gammingTips.innerText="(å¥³å·«å·²æ­»ğŸ‘»)\nä½ å·²ä½¿ç”¨å®Œå…©ç“¶è—¥\nå¥³å·«è«‹é–‰çœ¼ğŸ˜Œ\n\né»æ“Šç•«é¢ä¸‹ä¸€æ­¥";}
if(functionState.witch.antidote===false&&functionState.witch.poison===true){gammingTips.innerText="(å¥³å·«å·²æ­»ğŸ‘»)\nä½ è¦ä½¿ç”¨æ¯’è—¥å—ï¼Ÿ\nå¥³å·«è«‹é–‰çœ¼ğŸ˜Œ\n\né»æ“Šç•«é¢ä¸‹ä¸€æ­¥";}
if(functionState.witch.antidote===true&&functionState.witch.poison===false){gammingTips.innerText="(\u5973\u5DEB\u5DF2\u6B7B\uD83D\uDC7B)\n"+characterList[killed[0]].id+" \u865F\u88AB\u6BBA\u4E86\uFF0C\u8ACB\u554F\u4F60\u8981\u6551\u4ED6\u55CE\uFF1F\n\u5973\u5DEB\u8ACB\u9589\u773C\uD83D\uDE0C\n\n\u9EDE\u64CA\u756B\u9762\u4E0B\u4E00\u6B65";}
if(functionState.witch.antidote===true&&functionState.witch.poison===true){gammingTips.innerText="(\u5973\u5DEB\u5DF2\u6B7B\uD83D\uDC7B)\n"+characterList[killed[0]].id+" \u865F\u88AB\u6BBA\u4E86\uFF0C\u8ACB\u554F\u4F60\u8981\u6551\u4ED6\u55CE\uFF1F\n\u4F60\u8981\u4F7F\u7528\u6BD2\u85E5\u55CE\uFF1F\n\u5973\u5DEB\u8ACB\u9589\u773C\uD83D\uDE0C\n\n\u9EDE\u64CA\u756B\u9762\u4E0B\u4E00\u6B65";}
order++;return;}
if(functionState.witch.antidote===false&&functionState.witch.poison===false){gammingTips.innerText="ä½ å·²ä½¿ç”¨å®Œå…©ç“¶è—¥\nå¥³å·«è«‹é–‰çœ¼ğŸ˜Œ\né»æ“Šç•«é¢ä¸‹ä¸€æ­¥";order++;return;}
gammingChoose.classList.remove("none");if(functionState.witch.antidote===true){characterList[killed[0]].character==="å¥³å·«"?gammingTips.innerText=characterList[killed[0]].id+" \u865F\u88AB\u6BBA\u4E86\uFF0C\u8ACB\u554F\u4F60\u8981\u6551\u4ED6\u55CE\uFF1F\n(\u5973\u5DEB\u4E0D\u80FD\u81EA\u6551)":gammingTips.innerText=characterList[killed[0]].id+" \u865F\u88AB\u6BBA\u4E86\uFF0C\u8ACB\u554F\u4F60\u8981\u6551\u4ED6\u55CE\uFF1F";chooses[0].innerText="æ•‘";chooses[1].innerText="ä¸æ•‘";return;}
gammingTips.innerText="è«‹å•ä½ è¦ä½¿ç”¨æ¯’è—¥å—ï¼Ÿ";chooses[0].innerText="æ¯’";chooses[1].innerText="ä¸æ¯’";return;}
if(modelPlaying.processNight[order]==="å¤©äº®"){console.log("\u72FC\u5200 idx\uFF1A"+killed[0]+"\uFF0C\u5DEB\u6BD2 idx\uFF1A"+killed[1]);body.classList.remove("night");textTop.classList.remove("text-gold");gammingNumber.classList.add("none");gammingChoose.classList.add("none");if(killed[0]===killed[1]){killed=[killed[0]];}else{killed.sort(function(a,b){return a-b;});}
killed=killed.filter(function(num){return num>=0;});console.log("æ­»äº¡åå–® idxï¼š",killed);if(score.day===1&&killed.length!==0){order++;}else{order+=2;}
if(killed.length!==0){killed.length===1?textTop.innerText="\u5929\u4EAE\u4E86\uFF0C\u4ECA\u665A "+characterList[killed[0]].id+" \u865F\u88AB\u6BBA\u4E86\uD83E\uDE78":textTop.innerText="\u5929\u4EAE\u4E86\uFF0C\u4ECA\u665A "+characterList[killed[0]].id+","+characterList[killed[1]].id+" \u865F\u88AB\u6BBA\u4E86\uD83E\uDE78";gammingTips.innerText="é»æ“Šç•«é¢ä¸‹ä¸€æ­¥";killed.forEach(function(item){return deadOne(item);});console.log("è¨˜åˆ†æ¬„ï¼š",score);return;}
textTop.innerText="å¤©äº®äº†ï¼Œ\nä»Šæ™šæ˜¯å¹³å®‰å¤œğŸŒ™";gammingTips.innerText="é»æ“Šç•«é¢ä¸‹ä¸€æ­¥";console.log("è¨˜åˆ†æ¬„ï¼š",score);return;}
if(modelPlaying.processNight[order]==="éºè¨€"){killed.length===1?textTop.innerText="\u8ACB "+characterList[killed[0]].id+" \u865F\u767C\u8868\u907A\u8A00":textTop.innerText="\u8ACB "+characterList[killed[0]].id+","+characterList[killed[1]].id+" \u865F\u767C\u8868\u907A\u8A00";order++;return;}
morning();};var numbersChoosesClick=function numbersChoosesClick(){numbers.forEach(function(item,idx){item.addEventListener("click",function(e){e.preventDefault();if(modelPlaying.processNight[order]==="é "){characterList[idx].team!=="wolfs"?alert(idx+1+" \u865F\u662F\u597D\u4EBA\uD83D\uDC4D\n\u9810\u8A00\u5BB6\u8ACB\u9589\u773C\uD83D\uDE0C"):alert(idx+1+" \u865F\u662F\u72FC\u4EBA\uD83D\uDC4E\n\u9810\u8A00\u5BB6\u8ACB\u9589\u773C\uD83D\uDE0C");order++;return;}
if(modelPlaying.processNight[order]==="ç‹¼"){killed[0]=idx;alert("\u72FC\u4EBA\u8ACB\u9589\u773C\uD83D\uDE0C\n(\u72FC\u4EBA\u6BBA\u4E86 "+characterList[killed[0]].id+" \u865F\uD83E\uDE78)");order++;if(functionState.witch.antidote===false){if(characterList[killed[0]].team==="mans"&&score.mans===1||characterList[killed[0]].team==="gods"&&score.gods===1){deadOne(killed[0]);console.log("è¨˜åˆ†æ¬„ï¼š",score);gameOver();alert("\u5929\u4EAE\u4E86\uFF0C\u72FC\u4EBA\u6BBA\u4E86 "+characterList[killed[0]].id+" \u865F\uD83E\uDE78\n\u5973\u5DEB\u5DF2\u7121\u89E3\u85E5\uFF0C\u72FC\u4EBA\u7372\u52DD\uFF01");}}
return;}
if(modelPlaying.processNight[order]==="å·«"){killed[1]=idx;functionState.witch.poisonTarget=killed[1];alert("\u5973\u5DEB\u8ACB\u9589\u773C\uD83D\uDE0C\n(\u5973\u5DEB\u6BD2\u4E86 "+characterList[killed[1]].id+" \u865F\uD83D\uDC80)");order++;return;}
if(functionState.nightKillOrder>=0){if(characterList[killed[functionState.nightKillOrder]].character==="çµäºº"||characterList[killed[functionState.nightKillOrder]].character==="ç‹¼ç‹"){console.log(characterList[killed[functionState.nightKillOrder]].character+" \u5E36\u8D70\u5C0D\u8C61 idx",idx,characterList[idx]);alert(characterList[killed[functionState.nightKillOrder]].id+" \u865F\u5E36\u8D70\u4E86 "+characterList[idx].id+" \u865F\uD83E\uDE78");deadOne(idx);console.log("è¨˜åˆ†æ¬„ï¼š",score);if(killed.length===2&&functionState.nightKillOrder===0){functionState.nightKillOrder++;}else{functionState.nightKillOrder=-1;}
if(characterList[idx].character==="çµäºº"||characterList[idx].character==="ç‹¼ç‹"){if(isGameOver===true){gameOver();return;}
speakOrder[0]=idx;functionState.nightKillOrder=-1;gammingNumber.classList.add("none");gammingChoose.classList.remove("none");textTop.innerText=characterList[idx].id+" \u865F\u555F\u52D5\u89D2\u8272\u6280\u80FD";gammingTips.innerText="("+characterList[idx].character+") \u8ACB\u9078\u64C7\u4F60\u8981\u5E36\u8D70\u7684\u5C0D\u8C61\uD83E\uDE78";chooses[0].innerText="å¸¶äºº";chooses[1].innerText="ä¸å¸¶";return;}
morning();return;}}
if(textTop.innerText==="é€²è¡ŒæŠ•ç¥¨"){console.log(characterList[idx].id+" \u865F\u88AB\u6295\u51FA\u53BB\u4E86",characterList[idx]);deadOne(idx);if(isGameOver===true){alert(characterList[idx].id+" \u865F\u88AB\u6295\u51FA\u53BB\u4E86\uFF0C\u904A\u6232\u7D50\u675F\u3002");gameOver();return;}
alert(characterList[idx].id+" \u865F\u88AB\u6295\u51FA\u53BB\u4E86\uFF0C\u8ACB\u767C\u8868\u907A\u8A00\u3002");if(characterList[idx].character==="çµäºº"||characterList[idx].character==="ç‹¼ç‹"){speakOrder[0]=idx;gammingFunction.classList.add("none");gammingNumber.classList.add("none");gammingChoose.classList.remove("none");textTop.innerText=characterList[idx].id+" \u865F\u555F\u52D5\u89D2\u8272\u6280\u80FD";gammingTips.innerText="("+characterList[idx].character+") \u8ACB\u9078\u64C7\u4F60\u8981\u5E36\u8D70\u7684\u5C0D\u8C61\uD83E\uDE78";chooses[0].innerText="å¸¶äºº";chooses[1].innerText="ä¸å¸¶";return;}
night();return;}
if(characterList[speakOrder[0]].character==="çµäºº"||characterList[speakOrder[0]].character==="ç‹¼ç‹"){console.log(characterList[speakOrder[0]].character+" \u5E36\u8D70\u5C0D\u8C61 idx",idx,characterList[idx]);alert(characterList[speakOrder[0]].id+" \u865F\u5E36\u8D70\u4E86 "+characterList[idx].id+" \u865F\uD83E\uDE78");deadOne(idx);if(characterList[idx].character==="çµäºº"||characterList[idx].character==="ç‹¼ç‹"){if(isGameOver===true){gameOver();return;}
speakOrder[0]=idx;gammingNumber.classList.add("none");gammingChoose.classList.remove("none");textTop.innerText=characterList[idx].id+" \u865F\u555F\u52D5\u89D2\u8272\u6280\u80FD";gammingTips.innerText="("+characterList[idx].character+") \u8ACB\u9078\u64C7\u4F60\u8981\u5E36\u8D70\u7684\u5C0D\u8C61\uD83E\uDE78";chooses[0].innerText="å¸¶äºº";chooses[1].innerText="ä¸å¸¶";return;}
if(functionState.night===true){morning();return;}
isGameOver===false?night():gameOver();return;}
if(characterList[speakOrder[0]].character==="é¨å£«"){console.log("é¨å£«æ’äº†å°è±¡ idx",idx,characterList[idx]);if(characterList[idx].character==="ç‹¼ç‹"){alert(characterList[idx].id+" \u865F\u662F\u72FC\u4EBA\uD83D\uDC3A\n\u72FC\u4EBA\u6B7B\u4E86\uFF0C\u9A0E\u58EB\u6D3B\u8457\u3002");deadOne(idx);if(isGameOver===true){gameOver();return;}
textTop.innerText=characterList[idx].id+" \u865F\u555F\u52D5\u89D2\u8272\u6280\u80FD";gammingTips.innerText="("+characterList[idx].character+") \u8ACB\u9078\u64C7\u4F60\u8981\u5E36\u8D70\u7684\u5C0D\u8C61\uD83E\uDE78";speakOrder[0]=idx;return;}
var knightKill=void 0;if(characterList[idx].team==="wolfs"){alert(characterList[idx].id+" \u865F\u662F\u72FC\u4EBA\uD83D\uDC3A\n\u72FC\u4EBA\u6B7B\u4E86\uFF0C\u9A0E\u58EB\u6D3B\u8457\u3002");knightKill=idx;}else{alert(characterList[idx].id+" \u865F\u662F\u597D\u4EBA\uD83D\uDC4D\n\u9A0E\u58EB\u4EE5\u6B7B\u8B1D\u7F6A\u3002");knightKill=speakOrder[0];}
deadOne(knightKill);isGameOver===false?night():gameOver();return;}},false);});chooses.forEach(function(item){item.addEventListener("click",function(e){console.log(item.innerText);if(modelPlaying.processNight[order]==="å·«"){if(item.innerText==="æ•‘"){if(characterList[killed[0]].character==="å¥³å·«"){alert("å¥³å·«ä¸èƒ½è‡ªæ•‘ğŸš«\nè«‹é»é¸ã€Œä¸æ•‘ã€");return;}
functionState.witch.poison===true?alert("\u4F60\u8981\u4F7F\u7528\u6BD2\u85E5\u55CE\uFF1F(\u4ECA\u665A\u4E0D\u80FD\u7528\u4E86)\n\u5973\u5DEB\u8ACB\u9589\u773C\uD83D\uDE0C\n(\u5973\u5DEB\u6551\u4E86 "+characterList[killed[0]].id+" \u865F\uD83D\uDD2E)"):alert("\u5973\u5DEB\u8ACB\u9589\u773C\uD83D\uDE0C\n(\u5973\u5DEB\u6551\u4E86 "+characterList[killed[0]].id+" \u865F\uD83D\uDD2E)\n(\u5973\u5DEB\u5DF2\u7121\u6BD2\u85E5)");functionState.witch.antidote=false;killed[0]=-1;order++;return;}
if(item.innerText==="ä¸æ•‘"){if(functionState.witch.poison===true){gammingTips.innerText="è«‹å•ä½ è¦ä½¿ç”¨æ¯’è—¥å—ï¼Ÿ";chooses[0].innerText="æ¯’";chooses[1].innerText="ä¸æ¯’";return;}
alert("\u5973\u5DEB\u8ACB\u9589\u773C\uD83D\uDE0C\n(\u5973\u5DEB\u5DF2\u7121\u6BD2\u85E5)");order++;return;}
if(item.innerText==="æ¯’"){e.stopPropagation();gammingChoose.classList.add("none");gammingNumber.classList.remove("none");gammingTips.innerText="è«‹æ¯”å‡ºè¦æ¯’çš„å°è±¡";functionState.witch.poison=false;return;}
alert("\u5973\u5DEB\u8ACB\u9589\u773C\uD83D\uDE0C");order++;return;}
if(functionState.nightKillOrder>=0){if(characterList[killed[functionState.nightKillOrder]].character==="çµäºº"||characterList[killed[functionState.nightKillOrder]].character==="ç‹¼ç‹"){gammingChoose.classList.add("none");characterList[killed[functionState.nightKillOrder]].character==="çµäºº"?functionState.hunter.function=false:functionState.wolfKing.function=false;if(item.innerText==="å¸¶äºº"){gammingNumber.classList.remove("none");return;}
if(killed.length===2&&functionState.nightKillOrder===0){functionState.nightKillOrder++;}else{functionState.nightKillOrder=-1;}
morning();return;}}
if(characterList[speakOrder[0]].character==="çµäºº"||characterList[speakOrder[0]].character==="ç‹¼ç‹"){gammingChoose.classList.add("none");if(item.innerText==="å¸¶äºº"){gammingNumber.classList.remove("none");return;}
functionState.night===true?morning():night();}},false);});};var morning=function morning(){scoreRecord.innerText=score.wolfs+" \u72FC "+score.gods+" \u795E "+score.mans+" \u6C11";if(isGameOver===true){gameOver();return;}
app.removeEventListener("click",nightFlow,false);gammingNumber.classList.add("none");if(killed.length!==0&&functionState.nightKillOrder>=0){if(characterList[killed[functionState.nightKillOrder]].character==="çµäºº"&&functionState.hunter.function===true&&functionState.witch.poisonTarget!==killed[functionState.nightKillOrder]){console.log(characterList[killed[functionState.nightKillOrder]].character+" \u555F\u52D5\u89D2\u8272\u6280\u80FD");textTop.innerText=characterList[killed[functionState.nightKillOrder]].id+" \u865F\u555F\u52D5\u89D2\u8272\u6280\u80FD";gammingTips.innerText="("+characterList[killed[functionState.nightKillOrder]].character+") \u8ACB\u9078\u64C7\u4F60\u8981\u5E36\u8D70\u7684\u5C0D\u8C61\uD83E\uDE78";chooses[0].innerText="å¸¶äºº";chooses[1].innerText="ä¸å¸¶";gammingChoose.classList.remove("none");return;}
if(characterList[killed[functionState.nightKillOrder]].character==="ç‹¼ç‹"&&functionState.wolfKing.function===true&&functionState.witch.poisonTarget!==killed[functionState.nightKillOrder]){console.log(characterList[killed[functionState.nightKillOrder]].character+" \u555F\u52D5\u89D2\u8272\u6280\u80FD");textTop.innerText=characterList[killed[functionState.nightKillOrder]].id+" \u865F\u555F\u52D5\u89D2\u8272\u6280\u80FD";gammingTips.innerText="("+characterList[killed[functionState.nightKillOrder]].character+") \u8ACB\u9078\u64C7\u4F60\u8981\u5E36\u8D70\u7684\u5C0D\u8C61\uD83E\uDE78";chooses[0].innerText="å¸¶äºº";chooses[1].innerText="ä¸å¸¶";gammingChoose.classList.remove("none");return;}
if(killed.length===2&&functionState.nightKillOrder===0){functionState.nightKillOrder++;morning();return;}}
functionState.nightKillOrder=-1;functionState.night=false;console.log("ç™½å¤©ï¼šé–‹å§‹ç™¼è¨€");console.log("èº«åˆ†ï¼š",characterList);killed.length===0?startNum=rand(0,characterList.length-1):startNum=killed[0]+1;while(startNum>=characterList.length||characterList[startNum].alive!==true){if(startNum>=characterList.length){startNum-=characterList.length;continue;}
startNum++;}
console.log("ç™¼è¨€ç¬¬ä¸€ä½ï¼šidx",startNum,characterList[startNum]);textTop.innerText=characterList[startNum].id+" \u865F\u958B\u59CB\u767C\u8A00";gammingTips.innerText="("+characterList[startNum].character+")";gammingNext.innerText="ä¸‹ä¸€ä½";gammingNext.classList.remove("none");morningFunction(startNum);handleSpeakOrder();};var morningFunction=function morningFunction(idx){if(characterList[idx].team==="wolfs"){gammingFunction.classList.remove("none");gammingFunction.innerText="è‡ªçˆ†";return;}
if(characterList[idx].character==="é¨å£«"&&functionState.knight.function===true){gammingFunction.classList.remove("none");gammingFunction.innerText="æ’äºº";return;}
gammingFunction.classList.add("none");};var handleSpeakOrder=function handleSpeakOrder(){speakOrder=[];lastCharacterLisetLen=characterList.length;nextFirst=startNum;for(var i=0;i<lastCharacterLisetLen;i++){if(nextFirst>=lastCharacterLisetLen)nextFirst=0;if(characterList[nextFirst].alive===false){nextFirst++;continue;}
speakOrder.push(nextFirst);nextFirst++;}
console.log("ç™¼è¨€é †åº idx",speakOrder);gammingNext.addEventListener("click",nextClick,false);gammingFunction.addEventListener("click",functionClick,false);};var nextClick=function nextClick(){if(gammingNext.innerText==="å†ä¾†ä¸€å±€"){console.log(0);location.href.includes("github")?location.href="https://ya95123.github.io/autoWolf_v1/":location.href="/public";return;}
speakOrder.splice(0,1);console.log("ç™¼è¨€é †åº idx",speakOrder);if(speakOrder.length===0){console.log("æŠ•ç¥¨");gammingNext.classList.add("none");gammingNumber.classList.remove("none");gammingFunction.setAttribute("class","voteToNight");textTop.innerText="é€²è¡ŒæŠ•ç¥¨";gammingTips.innerText="æ•¸åˆ° 3ï¼Œè«‹æ¯”å‡ºè¦æŠ•å‡ºå»çš„å°è±¡\nè‹¥ç„¡äººå‡ºå±€ã€é€£çºŒå…©æ¬¡å¹³ç¥¨\nè«‹é»é¸ã€Œé€²å¤©é»‘ã€";gammingFunction.innerText="é€²å¤©é»‘";return;}
textTop.innerText=characterList[speakOrder[0]].id+" \u865F\u958B\u59CB\u767C\u8A00";gammingTips.innerText="("+characterList[speakOrder[0]].character+")";if(speakOrder.length===1)gammingNext.innerText="æŠ•ç¥¨";morningFunction(speakOrder[0]);};var functionClick=function functionClick(){if(gammingFunction.innerText==="è‡ªçˆ†"){console.log("è‡ªçˆ† idx",speakOrder[0],characterList[speakOrder[0]]);deadOne(speakOrder[0]);if(isGameOver===true){gameOver();return;}
if(characterList[speakOrder[0]].character==="ç‹¼ç‹"){gammingFunction.classList.add("none");gammingNext.classList.add("none");gammingNumber.classList.remove("none");textTop.innerText=characterList[speakOrder[0]].id+" \u865F\u555F\u52D5\u89D2\u8272\u6280\u80FD";gammingTips.innerText="("+characterList[speakOrder[0]].character+") \u8ACB\u9078\u64C7\u4F60\u8981\u5E36\u8D70\u7684\u5C0D\u8C61\uD83E\uDE78";return;}
night();return;}
if(gammingFunction.innerText==="æ’äºº"){console.log("æ’äºº");functionState.knight.function=false;gammingFunction.classList.add("none");gammingNext.classList.add("none");gammingNumber.classList.remove("none");textTop.innerText=characterList[speakOrder[0]].id+" \u865F\u9A0E\u58EB";gammingTips.innerText="("+characterList[speakOrder[0]].character+") \u8ACB\u9078\u64C7\u4F60\u8981\u649E\u7684\u5C0D\u8C61\uD83E\uDD84";return;}
if(gammingFunction.innerText==="é€²å¤©é»‘"){console.log("é€²å¤©é»‘");night();return;}};var deadOne=function deadOne(idx){numbers[idx].classList.add("dead");characterList[idx].alive=false;characterList[idx].team==="wolfs"?score.wolfs--:characterList[idx].team==="gods"?score.gods--:score.mans--;scoreRecord.innerText=score.wolfs+" \u72FC "+score.gods+" \u795E "+score.mans+" \u6C11";if(characterList[idx].character==="å¥³å·«")functionState.witch.alive=false;if(characterList[idx].character==="é è¨€å®¶")functionState.prophet.alive=false;if(score.wolfs===0||score.gods===0||score.mans===0)isGameOver=true;};var gameOver=function gameOver(){console.log("èº«åˆ†ï¼š",characterList);console.log("éŠæˆ²çµæŸ",score);body.classList.remove("night");textTop.classList.remove("text-gold");gammingNumber.classList.add("none");gammingFunction.classList.add("none");gammingNext.classList.remove("none");scoreRecord.classList.add("none");app.removeEventListener("click",nightFlow,false);score.wolfs===0?textTop.innerText="å¥½äººç²å‹\nğŸ™Œ":textTop.innerText="ç‹¼äººç²å‹\nğŸº";gammingTips.innerText="\u5269\u4E0B "+score.wolfs+" \u72FC "+score.gods+" \u795E "+score.mans+" \u6C11";gammingNext.innerText="å†ä¾†ä¸€å±€";};models.forEach(function(item,idx){item.innerHTML="\n      <span>\n        "+cate[idx].model+"<span class=\"model-character\">"+cate[idx].chracterText+"</span>\n      </span>\n      <span class=\"model-num\">"+cate[idx].peopleNum+"\u4EBA</span>\n    ";item.addEventListener("click",function(){selectModel(idx);},false);});