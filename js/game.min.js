
"use strict";var body=document.body;var app=document.getElementById("app");var setting=document.getElementById("setting");var giveCharacter=document.getElementById("giveCharacter");var gamming=document.getElementById("gamming");var giveRound=document.querySelector(".give-round");var textTop=document.getElementById("text-top");var gammingTips=document.getElementById("gamming-tips");var gammingNumber=document.getElementById("gamming-number");var gammingChoose=document.getElementById("gamming-choose");var gammingFunction=document.getElementById("gamming-function");var gammingNext=document.getElementById("gamming-next");var chooses=document.querySelectorAll(".choose");var models=document.querySelectorAll(".model");var scoreRecord=document.getElementById("scoreRecord");var modelData={"cate":[{"model":"一般局","peopleNum":9,"wolfsNum":3,"godsNum":3,"mansNum":3,"chracterText":"(3狼,預,女,獵,3民)","characterAll":["狼人","狼人","狼人","預言家","女巫","獵人","平民","平民","平民"],"processNight":["天黑","預","狼","巫","天亮","遺言"]},{"model":"狼王局","peopleNum":10,"wolfsNum":3,"godsNum":4,"mansNum":3,"chracterText":"(狼王,2狼,預,女,獵,騎,3民)","characterAll":["狼王","狼人","狼人","預言家","女巫","獵人","騎士","平民","平民","平民"],"processNight":["天黑","預","狼","巫","天亮","遺言"]}]};var cate=modelData.cate;var modelPlaying={};var characterList=[];var giveCharacterOrder=0;var giveTipsText=void 0;var numbers=void 0;var order=0;var killed=[];var score=[];var isGameOver=false;var startNum=void 0;var speakOrder=[];var lastCharacterLisetLen=void 0;var nextFirst=void 0;var functionState={"prophet":{"alive":true},"witch":{"antidote":true,"poison":true,"poisonTarget":-1,"start":false,"alive":true},"knight":{"function":true},"hunter":{"function":true},"wolfKing":{"function":true},"night":true,"nightKillOrder":0};var rand=function rand(min,max){var randArr=(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1));var randNum=randArr[0]/(0xffffffff+1);return Math.floor(randNum*(max-min+1)+min);};var selectModel=function selectModel(idx){console.log(cate[idx].model);if(cate[idx].model==="自訂模式")return;modelPlaying=cate[idx];score={"day":0,"wolfs":modelPlaying.wolfsNum,"gods":modelPlaying.godsNum,"mans":modelPlaying.mansNum};console.log("初始計分",score);give();giveHtml();setting.classList.add("no-show");setTimeout(function(){setting.classList.add("none");giveCharacter.classList.remove("none");},250);};var give=function give(){var id=void 0,character=void 0,randNum=void 0,team=void 0;var allNum=modelPlaying.peopleNum-1;for(var i=0;i<modelPlaying.peopleNum;i++){id=i+1;randNum=rand(0,allNum);allNum--;gammingNumber.insertAdjacentHTML("beforeend","<div class=\"number\">"+id+"</div>");character=modelPlaying.characterAll[randNum];modelPlaying.characterAll.splice(randNum,1);character.includes("狼")?team="wolfs":character.includes("民")?team="mans":team="gods";characterList.push({"id":id,"character":character,"team":team,"alive":true});}
numbers=document.querySelectorAll(".number");numbersChoosesClick();console.log("身分：",characterList);};var giveHtml=function giveHtml(){var giveNum=document.querySelector(".give-num");var giveTips=document.querySelector(".give-tips");var give_character=document.querySelector(".give-character");var lastOrder=characterList.length-1;giveRound.setAttribute("data-give","toCharacter");giveNum.innerText=characterList[giveCharacterOrder].id;giveTips.innerText="點擊看身分";giveRound.addEventListener("click",function(){if(giveRound.getAttribute("data-give")==="toCharacter"){give_character.innerText=characterList[giveCharacterOrder].character;giveCharacterOrder===lastOrder?giveTips.innerText="點擊後開始遊戲":giveTips.innerText="點擊後傳給下一位";giveRound.classList.add("round-rotate");give_character.classList.add("text-rotate");giveTips.classList.add("tips-rotate");setTimeout(function(){giveNum.classList.add("none");give_character.classList.remove("none");},120);giveRound.setAttribute("data-give","toNum");return;}
if(giveCharacterOrder===lastOrder){night();return;}
giveCharacterOrder++;giveNum.innerText=characterList[giveCharacterOrder].id;giveTips.innerText="點擊看身分";giveRound.classList.remove("round-rotate");give_character.classList.remove("text-rotate");giveTips.classList.remove("tips-rotate");setTimeout(function(){giveNum.classList.remove("none");give_character.classList.add("none");},120);giveRound.setAttribute("data-give","toCharacter");},false);};var night=function night(){body.classList.add("night");giveCharacter.classList.add("none");gammingNumber.classList.add("none");gammingChoose.classList.add("none");gammingNext.classList.add("none");gammingFunction.setAttribute("class","none");textTop.classList.remove("text-gold");gamming.classList.remove("none");scoreRecord.classList.remove("none");textTop.innerText="天黑請閉眼";gammingTips.innerText="點擊畫面下一步";functionState.witch.start=false;functionState.night=true;functionState.nightKillOrder=0;order=0;killed=[];scoreRecord.innerText=score.wolfs+" \u72FC "+score.gods+" \u795E "+score.mans+" \u6C11";score.day++;gammingNext.removeEventListener("click",nextClick,false);gammingFunction.removeEventListener("click",functionClick,false);app.addEventListener("click",nightFlow,false);console.log("記分欄：",score);};var nightFlow=function nightFlow(e){e.preventDefault();console.log("夜晚流程：",modelPlaying.processNight[order]);if(modelPlaying.processNight[order]==="天黑"){order++;return;}
if(modelPlaying.processNight[order]==="預"){textTop.classList.add("text-gold");textTop.innerText="預言家請睜眼";if(functionState.prophet.alive===false){gammingTips.innerText="(預言家已死👻)\n請選擇你要查驗的對象\n預言家請閉眼😌\n\n點擊畫面下一步";order++;return;}
gammingTips.innerText="請選擇你要查驗的對象";gammingNumber.classList.remove("none");return;}
if(modelPlaying.processNight[order]==="狼"){gammingNumber.classList.remove("none");textTop.innerText="狼人請睜眼";gammingTips.innerText="請確認彼此身分，比出要殺的對象";return;}
if(modelPlaying.processNight[order]==="巫"){console.log("女巫技能狀態：",functionState.witch);if(functionState.witch.start)return;functionState.witch.start=true;gammingNumber.classList.add("none");textTop.innerText="女巫請睜眼";if(functionState.witch.alive===false){if(functionState.witch.antidote===false&&functionState.witch.poison===false){gammingTips.innerText="(女巫已死👻)\n你已使用完兩瓶藥\n女巫請閉眼😌\n\n點擊畫面下一步";}
if(functionState.witch.antidote===false&&functionState.witch.poison===true){gammingTips.innerText="(女巫已死👻)\n你要使用毒藥嗎？\n女巫請閉眼😌\n\n點擊畫面下一步";}
if(functionState.witch.antidote===true&&functionState.witch.poison===false){gammingTips.innerText="(\u5973\u5DEB\u5DF2\u6B7B\uD83D\uDC7B)\n"+characterList[killed[0]].id+" \u865F\u88AB\u6BBA\u4E86\uFF0C\u8ACB\u554F\u4F60\u8981\u6551\u4ED6\u55CE\uFF1F\n\u5973\u5DEB\u8ACB\u9589\u773C\uD83D\uDE0C\n\n\u9EDE\u64CA\u756B\u9762\u4E0B\u4E00\u6B65";}
if(functionState.witch.antidote===true&&functionState.witch.poison===true){gammingTips.innerText="(\u5973\u5DEB\u5DF2\u6B7B\uD83D\uDC7B)\n"+characterList[killed[0]].id+" \u865F\u88AB\u6BBA\u4E86\uFF0C\u8ACB\u554F\u4F60\u8981\u6551\u4ED6\u55CE\uFF1F\n\u4F60\u8981\u4F7F\u7528\u6BD2\u85E5\u55CE\uFF1F\n\u5973\u5DEB\u8ACB\u9589\u773C\uD83D\uDE0C\n\n\u9EDE\u64CA\u756B\u9762\u4E0B\u4E00\u6B65";}
order++;return;}
if(functionState.witch.antidote===false&&functionState.witch.poison===false){gammingTips.innerText="你已使用完兩瓶藥\n女巫請閉眼😌\n點擊畫面下一步";order++;return;}
gammingChoose.classList.remove("none");if(functionState.witch.antidote===true){characterList[killed[0]].character==="女巫"?gammingTips.innerText=characterList[killed[0]].id+" \u865F\u88AB\u6BBA\u4E86\uFF0C\u8ACB\u554F\u4F60\u8981\u6551\u4ED6\u55CE\uFF1F\n(\u5973\u5DEB\u4E0D\u80FD\u81EA\u6551)":gammingTips.innerText=characterList[killed[0]].id+" \u865F\u88AB\u6BBA\u4E86\uFF0C\u8ACB\u554F\u4F60\u8981\u6551\u4ED6\u55CE\uFF1F";chooses[0].innerText="救";chooses[1].innerText="不救";return;}
gammingTips.innerText="請問你要使用毒藥嗎？";chooses[0].innerText="毒";chooses[1].innerText="不毒";return;}
if(modelPlaying.processNight[order]==="天亮"){console.log("\u72FC\u5200 idx\uFF1A"+killed[0]+"\uFF0C\u5DEB\u6BD2 idx\uFF1A"+killed[1]);body.classList.remove("night");textTop.classList.remove("text-gold");gammingNumber.classList.add("none");gammingChoose.classList.add("none");if(killed[0]===killed[1]){killed=[killed[0]];}else{killed.sort(function(a,b){return a-b;});}
killed=killed.filter(function(num){return num>=0;});console.log("死亡名單 idx：",killed);if(score.day===1&&killed.length!==0){order++;}else{order+=2;}
if(killed.length!==0){killed.length===1?textTop.innerText="\u5929\u4EAE\u4E86\uFF0C\u4ECA\u665A "+characterList[killed[0]].id+" \u865F\u88AB\u6BBA\u4E86\uD83E\uDE78":textTop.innerText="\u5929\u4EAE\u4E86\uFF0C\u4ECA\u665A "+characterList[killed[0]].id+","+characterList[killed[1]].id+" \u865F\u88AB\u6BBA\u4E86\uD83E\uDE78";gammingTips.innerText="點擊畫面下一步";killed.forEach(function(item){return deadOne(item);});console.log("記分欄：",score);return;}
textTop.innerText="天亮了，\n今晚是平安夜🌙";gammingTips.innerText="點擊畫面下一步";console.log("記分欄：",score);return;}
if(modelPlaying.processNight[order]==="遺言"){killed.length===1?textTop.innerText="\u8ACB "+characterList[killed[0]].id+" \u865F\u767C\u8868\u907A\u8A00":textTop.innerText="\u8ACB "+characterList[killed[0]].id+","+characterList[killed[1]].id+" \u865F\u767C\u8868\u907A\u8A00";order++;return;}
morning();};var numbersChoosesClick=function numbersChoosesClick(){numbers.forEach(function(item,idx){item.addEventListener("click",function(e){e.preventDefault();if(modelPlaying.processNight[order]==="預"){characterList[idx].team!=="wolfs"?alert(idx+1+" \u865F\u662F\u597D\u4EBA\uD83D\uDC4D\n\u9810\u8A00\u5BB6\u8ACB\u9589\u773C\uD83D\uDE0C"):alert(idx+1+" \u865F\u662F\u72FC\u4EBA\uD83D\uDC4E\n\u9810\u8A00\u5BB6\u8ACB\u9589\u773C\uD83D\uDE0C");order++;return;}
if(modelPlaying.processNight[order]==="狼"){killed[0]=idx;alert("\u72FC\u4EBA\u8ACB\u9589\u773C\uD83D\uDE0C\n(\u72FC\u4EBA\u6BBA\u4E86 "+characterList[killed[0]].id+" \u865F\uD83E\uDE78)");order++;if(functionState.witch.antidote===false){if(characterList[killed[0]].team==="mans"&&score.mans===1||characterList[killed[0]].team==="gods"&&score.gods===1){deadOne(killed[0]);console.log("記分欄：",score);gameOver();alert("\u5929\u4EAE\u4E86\uFF0C\u72FC\u4EBA\u6BBA\u4E86 "+characterList[killed[0]].id+" \u865F\uD83E\uDE78\n\u5973\u5DEB\u5DF2\u7121\u89E3\u85E5\uFF0C\u72FC\u4EBA\u7372\u52DD\uFF01");}}
return;}
if(modelPlaying.processNight[order]==="巫"){killed[1]=idx;functionState.witch.poisonTarget=killed[1];alert("\u5973\u5DEB\u8ACB\u9589\u773C\uD83D\uDE0C\n(\u5973\u5DEB\u6BD2\u4E86 "+characterList[killed[1]].id+" \u865F\uD83D\uDC80)");order++;return;}
if(functionState.nightKillOrder>=0){if(characterList[killed[functionState.nightKillOrder]].character==="獵人"||characterList[killed[functionState.nightKillOrder]].character==="狼王"){console.log(characterList[killed[functionState.nightKillOrder]].character+" \u5E36\u8D70\u5C0D\u8C61 idx",idx,characterList[idx]);alert(characterList[killed[functionState.nightKillOrder]].id+" \u865F\u5E36\u8D70\u4E86 "+characterList[idx].id+" \u865F\uD83E\uDE78");deadOne(idx);console.log("記分欄：",score);if(killed.length===2&&functionState.nightKillOrder===0){functionState.nightKillOrder++;}else{functionState.nightKillOrder=-1;}
if(characterList[idx].character==="獵人"||characterList[idx].character==="狼王"){if(isGameOver===true){gameOver();return;}
speakOrder[0]=idx;functionState.nightKillOrder=-1;gammingNumber.classList.add("none");gammingChoose.classList.remove("none");textTop.innerText=characterList[idx].id+" \u865F\u555F\u52D5\u89D2\u8272\u6280\u80FD";gammingTips.innerText="("+characterList[idx].character+") \u8ACB\u9078\u64C7\u4F60\u8981\u5E36\u8D70\u7684\u5C0D\u8C61\uD83E\uDE78";chooses[0].innerText="帶人";chooses[1].innerText="不帶";return;}
morning();return;}}
if(textTop.innerText==="進行投票"){console.log(characterList[idx].id+" \u865F\u88AB\u6295\u51FA\u53BB\u4E86",characterList[idx]);deadOne(idx);if(isGameOver===true){alert(characterList[idx].id+" \u865F\u88AB\u6295\u51FA\u53BB\u4E86\uFF0C\u904A\u6232\u7D50\u675F\u3002");gameOver();return;}
alert(characterList[idx].id+" \u865F\u88AB\u6295\u51FA\u53BB\u4E86\uFF0C\u8ACB\u767C\u8868\u907A\u8A00\u3002");if(characterList[idx].character==="獵人"||characterList[idx].character==="狼王"){speakOrder[0]=idx;gammingFunction.classList.add("none");gammingNumber.classList.add("none");gammingChoose.classList.remove("none");textTop.innerText=characterList[idx].id+" \u865F\u555F\u52D5\u89D2\u8272\u6280\u80FD";gammingTips.innerText="("+characterList[idx].character+") \u8ACB\u9078\u64C7\u4F60\u8981\u5E36\u8D70\u7684\u5C0D\u8C61\uD83E\uDE78";chooses[0].innerText="帶人";chooses[1].innerText="不帶";return;}
night();return;}
if(characterList[speakOrder[0]].character==="獵人"||characterList[speakOrder[0]].character==="狼王"){console.log(characterList[speakOrder[0]].character+" \u5E36\u8D70\u5C0D\u8C61 idx",idx,characterList[idx]);alert(characterList[speakOrder[0]].id+" \u865F\u5E36\u8D70\u4E86 "+characterList[idx].id+" \u865F\uD83E\uDE78");deadOne(idx);if(characterList[idx].character==="獵人"||characterList[idx].character==="狼王"){if(isGameOver===true){gameOver();return;}
speakOrder[0]=idx;gammingNumber.classList.add("none");gammingChoose.classList.remove("none");textTop.innerText=characterList[idx].id+" \u865F\u555F\u52D5\u89D2\u8272\u6280\u80FD";gammingTips.innerText="("+characterList[idx].character+") \u8ACB\u9078\u64C7\u4F60\u8981\u5E36\u8D70\u7684\u5C0D\u8C61\uD83E\uDE78";chooses[0].innerText="帶人";chooses[1].innerText="不帶";return;}
if(functionState.night===true){morning();return;}
isGameOver===false?night():gameOver();return;}
if(characterList[speakOrder[0]].character==="騎士"){console.log("騎士撞了對象 idx",idx,characterList[idx]);if(characterList[idx].character==="狼王"){alert(characterList[idx].id+" \u865F\u662F\u72FC\u4EBA\uD83D\uDC3A\n\u72FC\u4EBA\u6B7B\u4E86\uFF0C\u9A0E\u58EB\u6D3B\u8457\u3002");deadOne(idx);if(isGameOver===true){gameOver();return;}
textTop.innerText=characterList[idx].id+" \u865F\u555F\u52D5\u89D2\u8272\u6280\u80FD";gammingTips.innerText="("+characterList[idx].character+") \u8ACB\u9078\u64C7\u4F60\u8981\u5E36\u8D70\u7684\u5C0D\u8C61\uD83E\uDE78";speakOrder[0]=idx;return;}
var knightKill=void 0;if(characterList[idx].team==="wolfs"){alert(characterList[idx].id+" \u865F\u662F\u72FC\u4EBA\uD83D\uDC3A\n\u72FC\u4EBA\u6B7B\u4E86\uFF0C\u9A0E\u58EB\u6D3B\u8457\u3002");knightKill=idx;}else{alert(characterList[idx].id+" \u865F\u662F\u597D\u4EBA\uD83D\uDC4D\n\u9A0E\u58EB\u4EE5\u6B7B\u8B1D\u7F6A\u3002");knightKill=speakOrder[0];}
deadOne(knightKill);isGameOver===false?night():gameOver();return;}},false);});chooses.forEach(function(item){item.addEventListener("click",function(e){console.log(item.innerText);if(modelPlaying.processNight[order]==="巫"){if(item.innerText==="救"){if(characterList[killed[0]].character==="女巫"){alert("女巫不能自救🚫\n請點選「不救」");return;}
functionState.witch.poison===true?alert("\u4F60\u8981\u4F7F\u7528\u6BD2\u85E5\u55CE\uFF1F(\u4ECA\u665A\u4E0D\u80FD\u7528\u4E86)\n\u5973\u5DEB\u8ACB\u9589\u773C\uD83D\uDE0C\n(\u5973\u5DEB\u6551\u4E86 "+characterList[killed[0]].id+" \u865F\uD83D\uDD2E)"):alert("\u5973\u5DEB\u8ACB\u9589\u773C\uD83D\uDE0C\n(\u5973\u5DEB\u6551\u4E86 "+characterList[killed[0]].id+" \u865F\uD83D\uDD2E)\n(\u5973\u5DEB\u5DF2\u7121\u6BD2\u85E5)");functionState.witch.antidote=false;killed[0]=-1;order++;return;}
if(item.innerText==="不救"){if(functionState.witch.poison===true){gammingTips.innerText="請問你要使用毒藥嗎？";chooses[0].innerText="毒";chooses[1].innerText="不毒";return;}
alert("\u5973\u5DEB\u8ACB\u9589\u773C\uD83D\uDE0C\n(\u5973\u5DEB\u5DF2\u7121\u6BD2\u85E5)");order++;return;}
if(item.innerText==="毒"){e.stopPropagation();gammingChoose.classList.add("none");gammingNumber.classList.remove("none");gammingTips.innerText="請比出要毒的對象";functionState.witch.poison=false;return;}
alert("\u5973\u5DEB\u8ACB\u9589\u773C\uD83D\uDE0C");order++;return;}
if(functionState.nightKillOrder>=0){if(characterList[killed[functionState.nightKillOrder]].character==="獵人"||characterList[killed[functionState.nightKillOrder]].character==="狼王"){gammingChoose.classList.add("none");characterList[killed[functionState.nightKillOrder]].character==="獵人"?functionState.hunter.function=false:functionState.wolfKing.function=false;if(item.innerText==="帶人"){gammingNumber.classList.remove("none");return;}
if(killed.length===2&&functionState.nightKillOrder===0){functionState.nightKillOrder++;}else{functionState.nightKillOrder=-1;}
morning();return;}}
if(characterList[speakOrder[0]].character==="獵人"||characterList[speakOrder[0]].character==="狼王"){gammingChoose.classList.add("none");if(item.innerText==="帶人"){gammingNumber.classList.remove("none");return;}
functionState.night===true?morning():night();}},false);});};var morning=function morning(){scoreRecord.innerText=score.wolfs+" \u72FC "+score.gods+" \u795E "+score.mans+" \u6C11";if(isGameOver===true){gameOver();return;}
app.removeEventListener("click",nightFlow,false);gammingNumber.classList.add("none");if(killed.length!==0&&functionState.nightKillOrder>=0){if(characterList[killed[functionState.nightKillOrder]].character==="獵人"&&functionState.hunter.function===true&&functionState.witch.poisonTarget!==killed[functionState.nightKillOrder]){console.log(characterList[killed[functionState.nightKillOrder]].character+" \u555F\u52D5\u89D2\u8272\u6280\u80FD");textTop.innerText=characterList[killed[functionState.nightKillOrder]].id+" \u865F\u555F\u52D5\u89D2\u8272\u6280\u80FD";gammingTips.innerText="("+characterList[killed[functionState.nightKillOrder]].character+") \u8ACB\u9078\u64C7\u4F60\u8981\u5E36\u8D70\u7684\u5C0D\u8C61\uD83E\uDE78";chooses[0].innerText="帶人";chooses[1].innerText="不帶";gammingChoose.classList.remove("none");return;}
if(characterList[killed[functionState.nightKillOrder]].character==="狼王"&&functionState.wolfKing.function===true&&functionState.witch.poisonTarget!==killed[functionState.nightKillOrder]){console.log(characterList[killed[functionState.nightKillOrder]].character+" \u555F\u52D5\u89D2\u8272\u6280\u80FD");textTop.innerText=characterList[killed[functionState.nightKillOrder]].id+" \u865F\u555F\u52D5\u89D2\u8272\u6280\u80FD";gammingTips.innerText="("+characterList[killed[functionState.nightKillOrder]].character+") \u8ACB\u9078\u64C7\u4F60\u8981\u5E36\u8D70\u7684\u5C0D\u8C61\uD83E\uDE78";chooses[0].innerText="帶人";chooses[1].innerText="不帶";gammingChoose.classList.remove("none");return;}
if(killed.length===2&&functionState.nightKillOrder===0){functionState.nightKillOrder++;morning();return;}}
functionState.nightKillOrder=-1;functionState.night=false;console.log("白天：開始發言");console.log("身分：",characterList);killed.length===0?startNum=rand(0,characterList.length-1):startNum=killed[0]+1;while(startNum>=characterList.length||characterList[startNum].alive!==true){if(startNum>=characterList.length){startNum-=characterList.length;continue;}
startNum++;}
console.log("發言第一位：idx",startNum,characterList[startNum]);textTop.innerText=characterList[startNum].id+" \u865F\u958B\u59CB\u767C\u8A00";gammingTips.innerText="("+characterList[startNum].character+")";gammingNext.innerText="下一位";gammingNext.classList.remove("none");morningFunction(startNum);handleSpeakOrder();};var morningFunction=function morningFunction(idx){if(characterList[idx].team==="wolfs"){gammingFunction.classList.remove("none");gammingFunction.innerText="自爆";return;}
if(characterList[idx].character==="騎士"&&functionState.knight.function===true){gammingFunction.classList.remove("none");gammingFunction.innerText="撞人";return;}
gammingFunction.classList.add("none");};var handleSpeakOrder=function handleSpeakOrder(){speakOrder=[];lastCharacterLisetLen=characterList.length;nextFirst=startNum;for(var i=0;i<lastCharacterLisetLen;i++){if(nextFirst>=lastCharacterLisetLen)nextFirst=0;if(characterList[nextFirst].alive===false){nextFirst++;continue;}
speakOrder.push(nextFirst);nextFirst++;}
console.log("發言順序 idx",speakOrder);gammingNext.addEventListener("click",nextClick,false);gammingFunction.addEventListener("click",functionClick,false);};var nextClick=function nextClick(){if(gammingNext.innerText==="再來一局"){console.log(0);location.href.includes("github")?location.href="https://ya95123.github.io/autoWolf_v1/":location.href="/public";return;}
speakOrder.splice(0,1);console.log("發言順序 idx",speakOrder);if(speakOrder.length===0){console.log("投票");gammingNext.classList.add("none");gammingNumber.classList.remove("none");gammingFunction.setAttribute("class","voteToNight");textTop.innerText="進行投票";gammingTips.innerText="數到 3，請比出要投出去的對象\n若無人出局、連續兩次平票\n請點選「進天黑」";gammingFunction.innerText="進天黑";return;}
textTop.innerText=characterList[speakOrder[0]].id+" \u865F\u958B\u59CB\u767C\u8A00";gammingTips.innerText="("+characterList[speakOrder[0]].character+")";if(speakOrder.length===1)gammingNext.innerText="投票";morningFunction(speakOrder[0]);};var functionClick=function functionClick(){if(gammingFunction.innerText==="自爆"){console.log("自爆 idx",speakOrder[0],characterList[speakOrder[0]]);deadOne(speakOrder[0]);if(isGameOver===true){gameOver();return;}
if(characterList[speakOrder[0]].character==="狼王"){gammingFunction.classList.add("none");gammingNext.classList.add("none");gammingNumber.classList.remove("none");textTop.innerText=characterList[speakOrder[0]].id+" \u865F\u555F\u52D5\u89D2\u8272\u6280\u80FD";gammingTips.innerText="("+characterList[speakOrder[0]].character+") \u8ACB\u9078\u64C7\u4F60\u8981\u5E36\u8D70\u7684\u5C0D\u8C61\uD83E\uDE78";return;}
night();return;}
if(gammingFunction.innerText==="撞人"){console.log("撞人");functionState.knight.function=false;gammingFunction.classList.add("none");gammingNext.classList.add("none");gammingNumber.classList.remove("none");textTop.innerText=characterList[speakOrder[0]].id+" \u865F\u9A0E\u58EB";gammingTips.innerText="("+characterList[speakOrder[0]].character+") \u8ACB\u9078\u64C7\u4F60\u8981\u649E\u7684\u5C0D\u8C61\uD83E\uDD84";return;}
if(gammingFunction.innerText==="進天黑"){console.log("進天黑");night();return;}};var deadOne=function deadOne(idx){numbers[idx].classList.add("dead");characterList[idx].alive=false;characterList[idx].team==="wolfs"?score.wolfs--:characterList[idx].team==="gods"?score.gods--:score.mans--;scoreRecord.innerText=score.wolfs+" \u72FC "+score.gods+" \u795E "+score.mans+" \u6C11";if(characterList[idx].character==="女巫")functionState.witch.alive=false;if(characterList[idx].character==="預言家")functionState.prophet.alive=false;if(score.wolfs===0||score.gods===0||score.mans===0)isGameOver=true;};var gameOver=function gameOver(){console.log("身分：",characterList);console.log("遊戲結束",score);body.classList.remove("night");textTop.classList.remove("text-gold");gammingNumber.classList.add("none");gammingFunction.classList.add("none");gammingNext.classList.remove("none");scoreRecord.classList.add("none");app.removeEventListener("click",nightFlow,false);score.wolfs===0?textTop.innerText="好人獲勝\n🙌":textTop.innerText="狼人獲勝\n🐺";gammingTips.innerText="\u5269\u4E0B "+score.wolfs+" \u72FC "+score.gods+" \u795E "+score.mans+" \u6C11";gammingNext.innerText="再來一局";};models.forEach(function(item,idx){item.innerHTML="\n      <span>\n        "+cate[idx].model+"<span class=\"model-character\">"+cate[idx].chracterText+"</span>\n      </span>\n      <span class=\"model-num\">"+cate[idx].peopleNum+"\u4EBA</span>\n    ";item.addEventListener("click",function(){selectModel(idx);},false);});